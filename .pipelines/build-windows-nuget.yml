resources:
- repo: self

pool:
  name: Hosted VS2017
  demands: Cmd

steps:
- script: |
    CALL .scripts/restore.cmd
    CALL .scripts/build.cmd
    CALL .scripts/test.cmd
    CALL .scripts/package.cmd
  env:
    Tag: +$(Build.SourceVersion)
    nugetPath: $(Build.SourcesDirectory)\vowpalwabbit\.nuget\nuget.exe
    DebugBuildScripts: 1
  failOnStderr: true